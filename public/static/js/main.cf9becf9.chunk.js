(this["webpackJsonpcourse-file"]=this["webpackJsonpcourse-file"]||[]).push([[0],{65:function(e,t,c){},86:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(28),s=c.n(r),i=(c(65),c(9)),o=c(12),l=c(7),d=(c(57),c(87),c(88),l.a.initializeApp({apiKey:"AIzaSyBylff5FmD4_64g7KkEt065zahRpm2l7Hc",authDomain:"digital-course-file.firebaseapp.com",databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBylff5FmD4_64g7KkEt065zahRpm2l7Hc",REACT_APP_FIREBASE_APP_ID:"1:459962577891:web:227a67eaca784dcc4726d6",REACT_APP_FIREBASE_AUTH_DOMAIN:"digital-course-file.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-D2HMXLPPSG",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"459962577891",REACT_APP_FIREBASE_PROJECT_ID:"digital-course-file",REACT_APP_FIREBASE_STORAGE_BUCKET:"digital-course-file.appspot.com"}).REACT_APP_FIREBASE_DATABASE_URL,projectId:"digital-course-file",storageBucket:"digital-course-file.appspot.com",messagingSenderId:"459962577891",appId:"1:459962577891:web:227a67eaca784dcc4726d6"})),u=d.auth(),j=d.firestore(),b={folders:j.collection("folders"),files:j.collection("files"),users:j.collection("users"),formatDoc:function(e){return Object(o.a)({id:e.id},e.data())},getCurrentTimestamp:l.a.firestore.FieldValue.serverTimestamp},h={signInFlow:"popup",signInOptions:[l.a.auth.GoogleAuthProvider.PROVIDER_ID,l.a.auth.FacebookAuthProvider.PROVIDER_ID,l.a.auth.TwitterAuthProvider.PROVIDER_ID,l.a.auth.GithubAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},f=d.storage(),O=c(15),m=c(2),p=a.a.createContext();function x(){return Object(n.useContext)(p)}function v(e){var t=e.children,c=Object(n.useState)(),a=Object(i.a)(c,2),r=a[0],s=a[1],o=Object(O.f)();Object(n.useEffect)((function(){return u.onAuthStateChanged((function(e){s(e),o.push("/")}))}),[o]);var l={curUser:r,login:function(e,t){return u.signInWithEmailAndPassword(e,t)},signup:function(e,t){return u.createUserWithEmailAndPassword(e,t)},logout:function(){return u.signOut()},resetPassword:function(e){return u.sendPasswordResetEmail(e)},updateEmail:function(e){return r.updateEmail(e)},updatePassword:function(e){return r.updatePassword(e)}};return Object(m.jsx)(p.Provider,{value:l,children:t})}var g=c(13),N=c(48),w=c(24),y=c.n(w),E=c(31),S=c(91),P=c(98),A=c(95),k=c(94),C=c.p+"static/media/2.07c20396.PNG",R=c.p+"static/media/1.e188d54e.PNG",I=c(45),F=c.n(I);function _(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useRef)(),a=x().signup,r=Object(n.useState)(""),s=Object(i.a)(r,2),o=s[0],l=s[1],d=Object(n.useState)(!1),j=Object(i.a)(d,2),b=j[0],f=j[1],p=Object(O.f)();function v(){return(v=Object(E.a)(y.a.mark((function n(r){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t.current.value===c.current.value){n.next=3;break}return n.abrupt("return",l("Passwords do not match"));case 3:return n.prev=3,l(""),f(!0),n.next=8,a(e.current.value,t.current.value);case 8:p.push("/"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),l(n.t0.message);case 14:f(!1);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})))).apply(this,arguments)}return Object(m.jsxs)("div",{className:"login",children:[Object(m.jsx)("h1",{children:"V A U L T"}),Object(m.jsx)(S.a,{className:"d-flex align-items-center height-100vh",children:Object(m.jsxs)("div",{className:"w-100 size-400",children:[Object(m.jsx)(P.a,{children:Object(m.jsxs)(P.a.Body,{children:[Object(m.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),o&&Object(m.jsx)(A.a,{variant:"danger",children:o}),Object(m.jsxs)(k.a,{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(m.jsxs)(k.a.Group,{id:"email",children:[Object(m.jsx)("img",{src:C,alt:"",className:"form-img"}),Object(m.jsx)("input",{className:"form-input",type:"email",ref:e,required:!0})]}),Object(m.jsxs)(k.a.Group,{id:"password",children:[Object(m.jsx)("img",{src:R,alt:"",className:"form-img"}),Object(m.jsx)("input",{className:"form-input",type:"password",ref:t,required:!0})]}),Object(m.jsxs)(k.a.Group,{id:"password-confirm",children:[Object(m.jsx)("img",{src:R,alt:"",className:"form-img"}),Object(m.jsx)("input",{className:"form-input",type:"password",ref:c,required:!0})]}),Object(m.jsx)("div",{className:"box-3",children:Object(m.jsx)("button",{disabled:b,type:"submit",className:"btn btn-three w-100",children:Object(m.jsx)("span",{children:"SIGN UP"})})})]})]})}),Object(m.jsx)("div",{className:"w-100 text-center mt-2 form-txt",children:Object(m.jsx)(g.b,{to:"/login",children:"Already have an account? Login"})}),Object(m.jsx)(F.a,{uiConfig:h,firebaseAuth:u})]})})]})}var D=c(92);function T(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],a=t[1],r=x(),s=r.curUser,o=r.logout,l=Object(n.useState)(""),d=Object(i.a)(l,2),u=d[0],j=d[1],h=Object(n.useState)(""),f=Object(i.a)(h,2),p=f[0],v=f[1],N=Object(n.useState)(""),w=Object(i.a)(N,2),S=w[0],k=w[1],C=Object(O.f)();function R(){return(R=Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(""),e.prev=1,C.push("/login"),e.next=5,o();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){b.users.where("user","==",s.uid).get().then((function(e){e.forEach((function(e){j(e.data().name),v(e.data().ph),k(e.data().org)}))})).catch((function(e){console.log("Error getting documents: ",e)}))}),[s]),Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)("div",{className:"back-btn",children:Object(m.jsx)(D.a,{to:"/",variant:"outline-light",className:"text-truncate w-100",as:g.b,children:Object(m.jsx)("span",{className:"btn-label",children:"Back"})})}),Object(m.jsx)(P.a,{children:Object(m.jsxs)(P.a.Body,{children:[Object(m.jsx)("h2",{className:"text-center mb-4",children:"Profile"}),c&&Object(m.jsx)(A.a,{variant:"danger",children:c}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Email:"})," ",s.email]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Name:"})," ",u]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Phone Number:"})," ",p]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Organization:"})," ",S]}),Object(m.jsx)(g.b,{to:"/update-profile",className:"box3",children:Object(m.jsx)("button",{className:"btn btn-three w-100 mt-3",children:Object(m.jsx)("span",{children:"UPDATE PROFILE"})})})]})}),Object(m.jsx)("div",{className:"w-100 text-center mt-2",children:Object(m.jsx)(D.a,{className:"logout-btn",variant:"link",onClick:function(){return R.apply(this,arguments)},children:"Log Out"})})]})}function B(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=x().login,a=Object(n.useState)(""),r=Object(i.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)(!1),d=Object(i.a)(l,2),j=d[0],b=d[1],f=Object(O.f)();function p(){return(p=Object(E.a)(y.a.mark((function n(a){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),n.prev=1,o(""),b(!0),n.next=6,c(e.current.value,t.current.value);case 6:f.push("/"),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0),o(n.t0.message);case 13:b(!1);case 14:case"end":return n.stop()}}),n,null,[[1,9]])})))).apply(this,arguments)}return Object(m.jsxs)("div",{className:"login",children:[Object(m.jsx)("h1",{children:"V A U L T"}),Object(m.jsx)(S.a,{className:"d-flex align-items-center height-100vh",children:Object(m.jsxs)("div",{className:"w-100 size-400",children:[Object(m.jsx)(P.a,{children:Object(m.jsxs)(P.a.Body,{children:[Object(m.jsx)("h2",{className:"text-center mb-4",children:"Login"}),s&&Object(m.jsx)(A.a,{variant:"danger",children:s}),Object(m.jsxs)(k.a,{onSubmit:function(e){return p.apply(this,arguments)},children:[Object(m.jsxs)(k.a.Group,{id:"email",children:[Object(m.jsx)("img",{src:C,alt:"",className:"form-img"}),Object(m.jsx)("input",{className:"form-input",type:"email",ref:e,required:!0})]}),Object(m.jsxs)(k.a.Group,{id:"password",children:[Object(m.jsx)("img",{src:R,alt:"",className:"form-img"}),Object(m.jsx)("input",{className:"form-input",type:"password",ref:t,required:!0})]}),Object(m.jsx)("div",{className:"box-3",children:Object(m.jsx)("button",{disabled:j,type:"submit",className:"btn btn-three w-100",children:Object(m.jsx)("span",{children:"LOGIN"})})})]}),Object(m.jsx)("div",{className:"w-100 text-center mt-3 form-txt",children:Object(m.jsx)(g.b,{to:"/forgot-password",children:"Forgot Password?"})})]})}),Object(m.jsx)("div",{className:"w-100 text-center mt-2 form-txt",children:Object(m.jsx)(g.b,{to:"/signup",children:"New user? Sign Up"})}),Object(m.jsx)(F.a,{uiConfig:h,firebaseAuth:u})]})})]})}var G=c(60);function L(e){var t=e.component,c=Object(G.a)(e,["component"]),n=x().curUser;return Object(m.jsx)(O.b,Object(o.a)(Object(o.a)({},c),{},{render:function(e){return n?Object(m.jsx)(t,Object(o.a)({},e)):Object(m.jsx)(O.a,{to:"/login"})}}))}function U(){var e=Object(n.useRef)(),t=x().resetPassword,c=Object(n.useState)(""),a=Object(i.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),d=l[0],u=l[1],j=Object(n.useState)(!1),b=Object(i.a)(j,2),h=b[0],f=b[1];function O(){return(O=Object(E.a)(y.a.mark((function c(n){return y.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.preventDefault(),c.prev=1,u(""),s(""),f(!0),c.next=7,t(e.current.value);case 7:u("Check your inbox for further instructions"),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),s("Failed to reset password");case 13:f(!1);case 14:case"end":return c.stop()}}),c,null,[[1,10]])})))).apply(this,arguments)}return Object(m.jsx)("div",{className:"login",children:Object(m.jsx)(S.a,{className:"d-flex align-items-center  height-100vh",children:Object(m.jsxs)("div",{className:"w-100 size-400",children:[Object(m.jsx)(P.a,{children:Object(m.jsxs)(P.a.Body,{children:[Object(m.jsx)("h2",{className:"text-center mb-4",children:"Password Reset"}),r&&Object(m.jsx)(A.a,{variant:"danger",children:r}),d&&Object(m.jsx)(A.a,{variant:"success",children:d}),Object(m.jsxs)(k.a,{onSubmit:function(e){return O.apply(this,arguments)},children:[Object(m.jsxs)(k.a.Group,{id:"email",children:[Object(m.jsx)(k.a.Label,{children:"Email"}),Object(m.jsx)("input",{className:"form-input",type:"email",ref:e,required:!0})]}),Object(m.jsx)("div",{className:"box-3",children:Object(m.jsx)("button",{disabled:h,type:"submit",className:"btn btn-three w-100",children:Object(m.jsx)("span",{children:"RESET PASSWORD"})})})]}),Object(m.jsx)("div",{className:"w-100 text-center form-txt mt-3",children:Object(m.jsx)(g.b,{to:"/login",children:"Login"})})]})}),Object(m.jsxs)("div",{className:"w-100 text-center mt-2 form-txt",children:["Need an account? ",Object(m.jsx)(g.b,{to:"/signup",children:"Sign Up"})]})]})})})}var z=c.p+"static/media/ph.3eff2364.PNG",M=c.p+"static/media/name.f734b6ed.PNG",W=c.p+"static/media/profile.e58b0c61.jpg";function H(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useRef)(),a=x(),r=a.curUser,s=a.updatePassword,o=a.updateEmail,l=Object(n.useState)(""),d=Object(i.a)(l,2),u=d[0],j=d[1],h=Object(n.useState)(!1),p=Object(i.a)(h,2),v=p[0],N=p[1],w=Object(n.useState)(""),y=Object(i.a)(w,2),E=y[0],S=y[1],I=Object(O.f)(),F=Object(n.useState)(""),_=Object(i.a)(F,2),D=_[0],T=_[1],B=Object(n.useState)(""),G=Object(i.a)(B,2),L=G[0],U=G[1],H=Object(n.useState)(""),V=Object(i.a)(H,2),q=V[0],K=V[1];return Object(n.useEffect)((function(){b.users.where("user","==",r.uid).get().then((function(e){e.forEach((function(e){U(e.data().ph),T(e.data().name),K(e.data().org),S(e.data().profile)}))})).catch((function(e){console.log("Error getting documents: ",e)}))}),[r]),Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)(P.a,{children:Object(m.jsxs)(P.a.Body,{children:[Object(m.jsx)("h2",{className:"text-center mb-4",children:"Update Profile"}),u&&Object(m.jsx)(A.a,{variant:"danger",children:u}),Object(m.jsxs)(k.a,{onSubmit:function(n){if(n.preventDefault(),t.current.value!==c.current.value)return j("Passwords do not match");var a=[];N(!0),j(""),e.current.value!==r.email&&a.push(o(e.current.value)),t.current.value&&a.push(s(t.current.value)),b.users.where("user","==",r.uid).get().then((function(e){e.empty&&b.users.add({name:D,ph:L,org:q,user:r.uid}),e.forEach((function(e){b.users.doc(e.id).update({name:D,ph:L,org:q,user:r.uid})}))})).catch((function(e){console.log("Error getting documents: ",e)})),Promise.all(a).then((function(){I.push("/profile")})).catch((function(){j("Failed to update account")})).finally((function(){N(!1)}))},children:[Object(m.jsxs)("label",{htmlFor:"photo-upload",className:"custom-file-upload fas",children:[Object(m.jsx)("div",{className:"img-wrap img-upload",children:Object(m.jsx)("img",{src:E||W,alt:"profile"})}),Object(m.jsx)("input",{id:"photo-upload",type:"file",onChange:function(e){return function(e){var t=e.target.files[0];f.ref("/users/".concat(r.uid)).put(t).then((function(e){e.ref.getDownloadURL().then((function(e){console.log(e),b.users.where("user","==",r.uid).get().then((function(t){t.forEach((function(t){b.users.doc(t.id).update("profile",e).then((function(t){return S(e)}))}))}))}))}))}(e)}})]}),Object(m.jsxs)(k.a.Group,{id:"email",children:[Object(m.jsx)(k.a.Label,{children:"Email"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("img",{src:C,alt:"",className:"form-img"}),Object(m.jsx)("input",{className:"form-input",type:"email",ref:e,required:!0,defaultValue:r.email})]})]}),Object(m.jsxs)(k.a.Group,{id:"password",children:[Object(m.jsx)(k.a.Label,{children:"Password"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("img",{src:R,alt:"",className:"form-img"}),Object(m.jsx)("input",{className:"form-input",type:"password",ref:t,placeholder:"Leave blank to keep the same"})]})]}),Object(m.jsxs)(k.a.Group,{id:"password-confirm",children:[Object(m.jsx)(k.a.Label,{children:"Password Confirmation"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("img",{src:R,alt:"",className:"form-img"}),Object(m.jsx)("input",{className:"form-input",type:"password",ref:c,placeholder:"Leave blank to keep the same"})]})]}),Object(m.jsxs)(k.a.Group,{id:"name",children:[Object(m.jsx)(k.a.Label,{children:"Name"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("img",{src:M,alt:"",className:"form-img"}),Object(m.jsx)("input",{className:"form-input",type:"text",placeholder:"Enter your name",value:D,name:"name",onChange:function(e){return T(e.target.value)}})]})]}),Object(m.jsxs)(k.a.Group,{id:"name",children:[Object(m.jsx)(k.a.Label,{children:"Organization"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("img",{src:M,alt:"",className:"form-img"}),Object(m.jsx)("input",{className:"form-input",type:"text",placeholder:"Enter your orgnaization",value:q,name:"org",onChange:function(e){return K(e.target.value)}})]})]}),Object(m.jsxs)(k.a.Group,{id:"contact-no",children:[Object(m.jsx)(k.a.Label,{children:"Mobile Number"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("img",{src:z,alt:"",className:"form-img"}),Object(m.jsx)("input",{className:"form-input",type:"number",value:L,placeholder:"Mobile Number",name:"ph",onChange:function(e){return U(e.target.value)}})]}),Object(m.jsx)("div",{className:"box-3",children:Object(m.jsx)("button",{disabled:v,type:"submit",className:"btn btn-three w-100",children:Object(m.jsx)("span",{children:"UPDATE"})})})]})]})]})}),Object(m.jsx)("div",{className:"w-100 text-center mt-2 form-txt",children:Object(m.jsx)(g.b,{to:"/profile",children:"Cancel"})})]})}var V=c(18),q=c(93),K="select-folder",J="update-folder",Y="set-child-folders",X="set-child-files",Q={name:"Root",id:null,path:[]};function Z(e,t){var c=t.type,n=t.payload;switch(c){case K:return{folderId:n.folderId,folder:n.folder,childFiles:[],childFolders:[]};case J:return Object(o.a)(Object(o.a)({},e),{},{folder:n.folder});case Y:return Object(o.a)(Object(o.a)({},e),{},{childFolders:n.childFolders});case X:return Object(o.a)(Object(o.a)({},e),{},{childFiles:n.childFiles});default:return e}}var $=c.p+"static/media/addFolder.be30dca1.PNG";function ee(e){var t=e.currentFolder,c=Object(n.useState)(!1),a=Object(i.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),d=l[0],u=l[1],j=x().curUser;function h(){s(!1)}return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){s(!0)},className:"add-folder-btn",children:Object(m.jsx)("img",{alt:"",src:$})}),Object(m.jsxs)(q.a,{animation:!1,show:r,onHide:h,children:[Object(m.jsx)(D.a,{variant:"secondary",className:"btn-x",onClick:h,children:"x"}),Object(m.jsxs)(k.a,{onSubmit:function(e){if(e.preventDefault(),null!=t){var c=Object(V.a)(t.path);t!==Q&&c.push({name:t.name,id:t.id}),b.folders.add({name:d,parentId:t.id,user:j.uid,path:c,date:b.getCurrentTimestamp()}),u(""),h()}},children:[Object(m.jsx)(q.a.Body,{children:Object(m.jsxs)(k.a.Group,{children:[Object(m.jsx)(k.a.Label,{children:"Folder Name"}),Object(m.jsx)(k.a.Control,{type:"text",required:!0,value:d,onChange:function(e){return u(e.target.value)}})]})}),Object(m.jsx)(q.a.Footer,{children:Object(m.jsx)(D.a,{variant:"success",type:"submit",children:"Add Folder"})})]})]})]})}function te(e){var t=e.folder,c=Object(n.useState)(!1),a=Object(i.a)(c,2),r=a[0],s=a[1],l=Object(n.useState)(!1),d=Object(i.a)(l,2),u=d[0],j=d[1],h=Object(n.useState)(!1),O=Object(i.a)(h,2),p=O[0],v=O[1],N=Object(n.useState)(""),w=Object(i.a)(N,2),y=w[0],E=w[1],S=Object(n.useState)(!1),P=Object(i.a)(S,2),A=P[0],C=P[1],R=Object(n.useState)([]),I=Object(i.a)(R,2),F=I[0],_=I[1],T=Object(n.useState)([]),B=Object(i.a)(T,2),G=B[0],L=B[1],U=Object(n.useState)(""),z=Object(i.a)(U,2),M=z[0],W=z[1],H=function(){return j(!1)},K=Object(n.useRef)(),J=x().curUser;function Y(e){K.current.contains(e.target)||s(!1)}function X(e){var t=f.ref(e);t.listAll().then((function(e){e.items.forEach((function(e){var c,n;c=t.fullPath,n=e.name,f.ref(c).child(n).delete().then().catch((function(e){return console.log(e)}))})),e.prefixes.forEach((function(e){X(e.fullPath)}))})).catch((function(e){console.log(e)}))}function Z(e){var t;t=e.id,b.files.where("user","==",J.uid).where("folderId","==",t).get().then((function(e){e.forEach((function(e){b.files.doc(e.id).delete().then().catch((function(e){return console.log(e)}))}))})).catch((function(e){console.log("Error getting documents: ",e)})),b.folders.where("user","==",J.uid).where("parentId","==",e.id).get().then((function(e){e.forEach((function(e){Z(e)}))})),b.folders.doc(e.id).delete().then().catch((function(e){console.error("Error removing document: ",e)}))}return Object(n.useEffect)((function(){var e=[];b.users.where("user","==",J.uid).get().then((function(t){t.forEach((function(t){b.users.where("org","==",t.data().org).get().then((function(t){t.forEach((function(t){e.includes(t.data())||t.data().user===J.uid||e.push(t.data())}))}))}))})),_(e)}),[J.uid]),Object(n.useEffect)((function(){return r?document.addEventListener("mousedown",Y):document.removeEventListener("mousedown",Y),function(){document.removeEventListener("mousedown",Y)}}),[r]),Object(m.jsxs)("div",{children:[Object(m.jsxs)(q.a,{animation:!1,show:u,onHide:H,children:[Object(m.jsxs)(q.a.Body,{children:[Object(m.jsx)(D.a,{variant:"secondary",className:"btn-x",onClick:H,children:"x"}),Object(m.jsx)("h3",{children:"Are you sure?"}),Object(m.jsx)("p",{children:"Deleting would erase all contents of this folder permanently"})]}),Object(m.jsxs)(q.a.Footer,{children:[Object(m.jsx)(D.a,{variant:"light",onClick:H,children:"No! Go back"}),Object(m.jsx)(D.a,{variant:"danger",onClick:function(){s(!1),H(),X(t===Q?"files/".concat(t.user).concat(t.path.join("/")):"files/".concat(t.user).concat(t.path.join("/"),"/").concat(t.name)),Z(t)},children:"Yes! Delete"})]})]}),Object(m.jsxs)(q.a,{animation:!1,show:p,onHide:function(){return v(!1)},children:[Object(m.jsx)(D.a,{variant:"secondary",className:"btn-x",onClick:function(){return v(!1)},children:"x"}),Object(m.jsxs)(k.a,{onSubmit:function(e){e.preventDefault(),b.folders.doc(t.id).update(Object(o.a)(Object(o.a)({},t),{},{name:y})).then().catch((function(e){return console.log(e)})),s(!1),v(!1)},children:[Object(m.jsx)(q.a.Body,{children:Object(m.jsxs)(k.a.Group,{children:[Object(m.jsx)(k.a.Label,{children:"New folder Name"}),Object(m.jsx)(k.a.Control,{type:"text",required:!0,value:y,onChange:function(e){return E(e.target.value)}})]})}),Object(m.jsxs)(q.a.Footer,{children:[Object(m.jsx)(D.a,{variant:"success",type:"submit",children:"Rename"}),Object(m.jsx)(D.a,{variant:"outline-dark",onClick:function(){return v(!1)},children:"Close"})]})]})]}),Object(m.jsxs)(q.a,{animation:!1,show:A,onHide:function(){return C(!1)},children:[Object(m.jsxs)(q.a.Body,{children:[Object(m.jsx)(D.a,{variant:"secondary",className:"btn-x",onClick:function(){return C(!1)},children:"x"}),Object(m.jsx)("h3",{children:"Share this folder"}),F&&G&&G.filter((function(e){return void 0!==e})).map((function(e){return Object(m.jsxs)("div",{className:"shareItems",children:[Object(m.jsx)("button",{onClick:function(){return L(G.filter((function(t){return t!==e})))},children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#f05454",className:"bi bi-trash-fill",viewBox:"0 0 16 16",children:Object(m.jsx)("path",{d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"})})}),Object(m.jsx)("p",{children:F.filter((function(t){return t.user===e}))[0].name})]},e)})),Object(m.jsx)("p",{children:"Click on the plus sign to add users"}),Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsxs)("select",{className:"custom-select",id:"inputGroupSelect04",onChange:function(e){return W(e.target.value)},children:[Object(m.jsx)("option",{defaultValue:"1",children:"Add user to folder"}),F.map((function(e,t){return Object(m.jsxs)("option",{value:e.user,children:[" ",e.name]},t)}))]}),Object(m.jsx)("div",{className:"input-group-append",children:Object(m.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){M&&"1"!==M&&!G.includes(M)&&0!==F.filter((function(e){return e.user===M})).length&&L([].concat(Object(V.a)(G),[M]))},children:"Add"})})]})]}),Object(m.jsxs)(q.a.Footer,{children:[Object(m.jsx)(D.a,{variant:"light",onClick:function(){return C(!1)},children:"No! Go back"}),Object(m.jsx)(D.a,{variant:"success",onClick:function(){var e=G.filter((function(e){return void 0!==e}));b.folders.doc(t.id).update("shared",e).then((function(){return C(!1)})).catch((function(e){return console.log(e)}))},children:"Yes! Share em all!"})]})]}),Object(m.jsx)(D.a,{to:{pathname:"/folder/".concat(t.id),state:{folder:t}},variant:"outline-light",className:"text-truncate w-100",onContextMenu:function(e){t.user===J.uid&&(b.folders.doc(t.id).get().then((function(e){return L(Object(V.a)(new Set(G.concat(e.data().shared))))})).catch((function(e){return console.log(e)})),e.preventDefault(),s(!0))},as:g.b,children:Object(m.jsx)("span",{className:"btn-label",children:t.name})}),r&&Object(m.jsxs)("div",{ref:K,className:"drop-down",children:[Object(m.jsx)("button",{className:"dropdown-item",onClick:function(){s(!1),v(!0)},children:"Rename"}),Object(m.jsx)("button",{className:"dropdown-item",onClick:function(){s(!1),j(!0)},children:"Delete"}),Object(m.jsx)("button",{className:"dropdown-item",onClick:function(){C(!0),s(!1)},children:"Share"})]})]})}var ce=c(99);function ne(e){var t=e.currentFolder,c=t===Q?[]:[Q];return t&&(c=[].concat(Object(V.a)(c),Object(V.a)(t.path))),Object(m.jsxs)(ce.a,{className:"flex-grow-1",listProps:{className:"bg-trans m-0 ml-6"},children:[c.map((function(e,t){return Object(m.jsx)(ce.a.Item,{linkAs:g.b,linkProps:{to:{pathname:e.id?"/folder/".concat(e.id):"/",state:{folder:Object(o.a)(Object(o.a)({},e),{},{path:c.slice(1,t)})}}},className:"text-truncate d-inline-block path-item",style:{maxWidth:"150px"},children:e.name},e.id)})),t&&Object(m.jsx)(ce.a.Item,{className:"text-truncate d-inline-block path-item",style:{maxWidth:"200px"},active:!0,children:t.name})]})}var ae=c.p+"static/media/addFile.801d0623.PNG",re=c(97),se=c(96),ie=c(100);function oe(e){var t=e.currentFolder,c=Object(n.useState)([]),a=Object(i.a)(c,2),r=a[0],l=a[1],d=x().curUser,u=Object(re.a)();return Object(m.jsxs)("div",{children:[Object(m.jsxs)("label",{className:"add-file",children:[Object(m.jsx)("div",{className:"add-folder-btn",children:Object(m.jsx)("img",{alt:"",src:ae})}),Object(m.jsx)("input",{type:"file",onChange:function(e){var c=e.target.files[0];if(t&&c){l((function(e){return[].concat(Object(V.a)(e),[{id:u,name:c.name,progress:0,error:!1}])}));var n=t.path.map((function(e){return e.name})).join("/"),a=t===Q?"".concat(n,"/").concat(c.name):"".concat(n,"/").concat(t.name,"/").concat(c.name),r=f.ref("/files/".concat(d.uid,"/").concat(a)).put(c);r.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes;l((function(e){return e.map((function(e){return e.id===u?Object(o.a)(Object(o.a)({},e),{},{progress:t}):e}))}))}),(function(){l((function(e){return e.map((function(e){return e.id===u?Object(o.a)(Object(o.a)({},e),{},{error:!0}):e}))}))}),(function(){l((function(e){return e.filter((function(e){return e.id!==u}))})),r.snapshot.ref.getDownloadURL().then((function(e){b.files.where("name","==",c.name).where("user","==",d.uid).where("folderId","==",t.id).get().then((function(n){var a=n.docs[0];a?a.ref.update({url:e}):b.files.add({url:e,name:c.name,createdAt:b.getCurrentTimestamp(),folderId:t.id,user:d.uid})}))}))}))}}})]}),r.length>0&&s.a.createPortal(Object(m.jsx)("div",{style:{position:"absolute",bottom:"1rem",left:"1rem",maxWidth:"250px"},children:r.map((function(e){return Object(m.jsxs)(se.a,{onClose:function(){l((function(t){return t.filter((function(t){return t.id!==e.id}))}))},children:[Object(m.jsx)(se.a.Header,{closeButton:e.error,className:"text-truncate w-100 d-block",children:e.name}),Object(m.jsx)(se.a.Body,{children:Object(m.jsx)(ie.a,{animated:!e.error,variant:e.error?"danger":"primary",now:e.error?100:100*e.progress,label:e.error?"Error":"".concat(Math.round(100*e.progress),"%")})})]},e.id)}))}),document.body)]})}var le=c.p+"static/media/rabbit.6c45dcec.png",de=c.p+"static/media/defaultFile.31d6cfe0.jfif";function ue(e){var t=e.file,c=Object(n.useState)(!1),a=Object(i.a)(c,2),r=a[0],s=a[1],l=Object(n.useRef)();function d(e){l.current.contains(e.target)||s(!1)}return Object(n.useEffect)((function(){return r?document.addEventListener("mousedown",d):document.removeEventListener("mousedown",d),function(){document.removeEventListener("mousedown",d)}}),[r]),Object(m.jsxs)("div",{children:[Object(m.jsxs)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"file",onContextMenu:function(e){e.preventDefault(),s(!0)},children:[Object(m.jsx)("div",{className:"img-zoom",children:Object(m.jsx)("img",{src:["jpg","png","PNG","jfif","jpeg"].includes(t.name.split(".")[1])?t.url:de,alt:t.name})}),Object(m.jsx)("p",{className:"text-truncate",children:t.name})]}),r&&Object(m.jsx)("div",{ref:l,className:"drop-down",children:Object(m.jsx)("button",{className:"dropdown-item",onClick:function(e){e.preventDefault(),b.files.doc(t.id).update(Object(o.a)(Object(o.a)({},t),{},{favourite:!0})).then().catch((function(e){return console.log(e)})),s(!1)},children:"Favourite"})})]})}var je=function(){return Object(m.jsxs)("nav",{className:"navbar navbar-dark navbar-expand-sm justify-content-between",children:[Object(m.jsx)(g.b,{to:"/",className:"navbar-brand mb-0 h1",children:"V A U L T"}),Object(m.jsxs)("ul",{className:"navbar-nav",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(g.b,{to:"/search",className:"nav-link",children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"white",className:"bi bi-search",viewBox:"0 0 16 16",children:Object(m.jsx)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"})})})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(g.b,{to:"/profile",className:"nav-link",children:"Profile "})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(g.b,{to:"/fav",className:"nav-link",children:"Favourites "})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(g.b,{to:"/shared",className:"nav-link",children:"Shared with Me "})})]})]})};function be(){var e=Object(O.h)().folderId,t=Object(O.g)().state,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=Object(n.useReducer)(Z,{folderId:e,folder:t,childFolders:[],childFiles:[]}),a=Object(i.a)(c,2),r=a[0],s=a[1],o=x().curUser;return Object(n.useEffect)((function(){s({type:K,payload:{folderId:e,folder:t}})}),[e,t]),Object(n.useEffect)((function(){if(null==e)return s({type:J,payload:{folder:Q}});b.folders.doc(e).get().then((function(e){s({type:J,payload:{folder:b.formatDoc(e)}})})).catch((function(){s({type:J,payload:{folder:Q}})}))}),[e]),Object(n.useEffect)((function(){return null===e?b.folders.where("parentId","==",e).where("user","==",o.uid).orderBy("date").onSnapshot((function(e){s({type:Y,payload:{childFolders:e.docs.map(b.formatDoc)}})})):b.folders.where("parentId","==",e).onSnapshot((function(e){s({type:Y,payload:{childFolders:e.docs.map(b.formatDoc)}})}))}),[e,o]),Object(n.useEffect)((function(){return null===e?b.files.where("folderId","==",e).where("user","==",o.uid).onSnapshot((function(e){s({type:X,payload:{childFiles:e.docs.map(b.formatDoc)}})})):b.files.where("folderId","==",e).onSnapshot((function(e){s({type:X,payload:{childFiles:e.docs.map(b.formatDoc)}})}))}),[e,o]),r}(e,(void 0===t?{}:t).folder),a=c.folder,r=c.childFolders,s=c.childFiles,o=Object(n.useState)([]),l=Object(i.a)(o,2),d=l[0],u=l[1],j=Object(n.useState)(!1),h=Object(i.a)(j,2),f=h[0],p=h[1];return Object(n.useEffect)((function(){return u(Object(V.a)(r))}),[r]),Object(n.useEffect)((function(){p(!1)}),[a]),setTimeout((function(){p(!0)}),3e3),Object(m.jsxs)("div",{className:"dashboard",children:[Object(m.jsx)(je,{}),Object(m.jsxs)("div",{className:"d-flex align-items-center",children:[Object(m.jsx)(ne,{currentFolder:a}),Object(m.jsx)(ee,{currentFolder:a}),Object(m.jsx)(oe,{currentFolder:a}),Object(m.jsxs)("div",{className:"search-bar",children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#05505B",className:"bi bi-search form-img",viewBox:"0 0 18 18",children:Object(m.jsx)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"})}),Object(m.jsx)("input",{className:"form-input",placeholder:"Search",type:"text",onChange:function(e){return u(Object(V.a)(r.filter((function(t){return t.name.startsWith(e.target.value)}))))}})]})]}),Object(m.jsxs)("div",{className:"folder-container",children:[r.length>0&&Object(m.jsx)("div",{className:"d-flex flex-wrap",children:d.map((function(e){return Object(m.jsx)("div",{style:{maxWidth:"250px"},className:"p-2",children:Object(m.jsx)(te,{folder:e})},e.id)}))}),r.length>0&&s.length>0&&Object(m.jsx)("hr",{className:"line"}),s.length>0&&Object(m.jsx)("div",{className:"d-flex flex-wrap",children:s.map((function(e){return Object(m.jsx)("div",{style:{maxWidth:"15rem"},className:"p-2",children:Object(m.jsx)(ue,{file:e})},e.id)}))})]}),f&&0===r.length&&0===s.length&&Object(m.jsxs)("div",{className:"empty-folder",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Oops! This folder is empty."}),Object(m.jsx)("h4",{children:"Add content using the buttons in the bottom-right corner."}),Object(m.jsx)("h5",{children:"Till then have a look at this cute bunny..."})]}),Object(m.jsx)("img",{src:le,alt:""})]})]})}var he=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],a=t[1],r=x().curUser;return Object(n.useEffect)((function(){b.files.where("user","==",r.uid).where("favourite","==",!0).onSnapshot((function(e){a(e.docs.map(b.formatDoc))}))}),[r]),Object(m.jsxs)("div",{children:[Object(m.jsx)(je,{}),Object(m.jsx)("div",{className:"folder-container",children:Object(m.jsx)("div",{className:"d-flex flex-wrap",children:c.map((function(e){return Object(m.jsx)("div",{style:{maxWidth:"15rem"},className:"p-2",children:Object(m.jsx)(ue,{file:e})},e.id)}))})}),0===c.length&&Object(m.jsxs)("div",{className:"empty-folder",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Oops! This folder is empty."}),Object(m.jsx)("h4",{children:"Add content using the buttons in the bottom-right corner."}),Object(m.jsx)("h5",{children:"Till then have a look at this cute bunny..."})]}),Object(m.jsx)("img",{src:le,alt:""})]})]})};var fe=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],a=t[1],r=x().curUser;return Object(n.useEffect)((function(){var e=[];b.folders.where("shared","array-contains",r.uid).get().then((function(t){t.forEach((function(t){return e.push(Object(o.a)({id:t.id},t.data()))})),a(Object(V.a)(new Set(e)))}))}),[r]),Object(m.jsxs)("div",{children:[Object(m.jsx)(je,{}),Object(m.jsx)("div",{className:"folder-container",children:Object(m.jsx)("div",{className:"d-flex flex-wrap",children:c.map((function(e){return Object(m.jsx)("div",{style:{maxWidth:"250px"},className:"p-2",children:Object(m.jsx)(te,{folder:e})},e.id)}))})}),0===c.length&&Object(m.jsxs)("div",{className:"empty-folder",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Oops! This folder is empty."}),Object(m.jsx)("h4",{children:"When someone shares a folder to you, you will find it here."}),Object(m.jsx)("h5",{children:"Till then have a look at this cute bunny..."})]}),Object(m.jsx)("img",{src:le,alt:""})]})]})};var Oe=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(i.a)(r,2),l=s[0],d=s[1],u=x().curUser;return Object(n.useEffect)((function(){var e=[];b.folders.where("user","==",u.uid).get().then((function(t){t.forEach((function(t){return e.push(Object(o.a)({id:t.id},t.data()))})),a(Object(V.a)(new Set(e))),d(Object(V.a)(new Set(e)))}))}),[u]),Object(m.jsxs)("div",{className:"dashboard",children:[Object(m.jsx)(je,{}),Object(m.jsx)("input",{className:"form-input search",placeholder:"Type to Filter",type:"text",onChange:function(e){return a(Object(V.a)(l.filter((function(t){return t.name.startsWith(e.target.value)}))))}}),Object(m.jsx)("div",{className:"folder-container",children:c.length>0&&Object(m.jsx)("div",{className:"d-flex flex-wrap",children:c.map((function(e){return Object(m.jsx)("div",{style:{maxWidth:"250px"},className:"p-2",children:Object(m.jsx)(te,{folder:e})},e.id)}))})})]})};var me=function(){return Object(m.jsx)("div",{children:Object(m.jsx)(g.a,{children:Object(m.jsx)(v,{children:Object(m.jsxs)(N.a,{children:[Object(m.jsx)(L,{exact:!0,path:"/",component:be}),Object(m.jsx)(L,{exact:!0,path:"/folder/:folderId",component:be}),Object(m.jsx)(O.b,{path:"/profile",component:T}),Object(m.jsx)(O.b,{path:"/signup",component:_}),Object(m.jsx)(O.b,{path:"/login",component:B}),Object(m.jsx)(O.b,{path:"/forgot-password",component:U}),Object(m.jsx)(O.b,{path:"/update-profile",component:H}),Object(m.jsx)(O.b,{path:"/fav",component:he}),Object(m.jsx)(O.b,{path:"/shared",component:fe}),Object(m.jsx)(O.b,{path:"/search",component:Oe})]})})})})};c(85);s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(me,{})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.cf9becf9.chunk.js.map